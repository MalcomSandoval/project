---
import Layout from './Layout.astro';
import Sidebar from '../components/Sidebar.svelte';
import Navbar from '../components/Navbar.svelte';

export interface Props {
  title: string;
  currentPage: string;
}

const { title, currentPage } = Astro.props;
---

<Layout title={title}>
  <div class="flex h-screen bg-gray-100">
    <Sidebar currentPage={currentPage} client:load />
    <div class="flex-1 flex flex-col">
      <Navbar client:load />
      <main class="flex-1 p-6 overflow-auto">
        <slot />
      </main>
    </div>
  </div>
</Layout>

<script>
  // Verificar autenticaciÃ³n
  import { supabase } from '../services/supabase.js';
  
  const checkAuth = async () => {
    const { data: { session } } = await supabase.auth.getSession();
    if (!session) {
      window.location.href = '/login';
    }
  };
  
  checkAuth();
</script>